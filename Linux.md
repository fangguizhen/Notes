# Linux学习笔记

[toc]

### 1.1远程登陆

* XShell 5能够远程访问Linux系统的前提是，Linux启用了SSHD服务，该服务会监听22号端口

### 1.2vim三种模式

* 一般模式：VIM 的默认模式，可以用于移动游标查看内容；
* 命令行模式：按下 "i" 等按键之后进入，可以对文本进行编辑；
* 编辑模式：按下 ":" 按键之后进入，用于保存退出等操作。

### 1.3关机&重启

| 指令            | 含义                   |
| --------------- | ---------------------- |
| shutdown -h now | 立即关机               |
| shutdown -h 1   | 1分钟后关机            |
| shutdown -r now | 立即重启               |
| halt            | 关机                   |
| init 0          | 关机                   |
| reboot          | 重启                   |
| sync            | 把内存的数据同步到磁盘 |

* 细节：当我们关机或者重启时，都应该先执行sync命令，把内存的数据写入磁盘，防止数据丢失。

### 1.4用户管理

#### 1.4.1用户家目录

* `/home/`目录下有各个创建的用户对应的家目录，当用户登录时，会自动进入自己的家目录。

#### 1.4.2添加用户

| 指令                 | 含义                     |
| -------------------- | ------------------------ |
| useradd              | 添加用户                 |
| useradd -d 目录 用户 | 给新创建的用户指定家目录 |
| passwd 用户          | 修改用户密码             |

#### 1.4.3删除用户

| 指令            | 含义                 |
| --------------- | -------------------- |
| userdel 用户    | 删除用户但保留家目录 |
| userdel -r 用户 | 删除用户及家目录     |

#### 1.4.4切换用户

| 指令      | 含义             |
| --------- | ---------------- |
| su - 用户 | 切换用户         |
| exit      | 切换到上一个用户 |

#### 1.4.5查询用户

| 指令     | 含义         |
| -------- | ------------ |
| id 用户  | 查询用户信息 |
| whoami   | 查询当前用户 |
| who am i | 查询当前用户 |

* 细节：当用户不存在时，返回“无此用户”

#### 1.4.6用户登录与注销

| 指令   | 含义         | 备注                                      |
| ------ | ------------ | ----------------------------------------- |
| logout | 注销当前用户 | 该指令在图形运行级别无效，在运行级别3有效 |

#### 1.4.7用户组

| 指令                   | 含义                         |
| ---------------------- | ---------------------------- |
| groupadd 用户组        | 创建组                       |
| groupdel 用户组        | 删除组                       |
| useradd -g 用户组 用户 | 添加用户并将用户添加到指定组 |
| usermod -g 用户组 用户 | 将用户修改到指定组           |

### 1.5快捷键

* Tab：命令和文件名补全；
* Ctrl+C：中断正在运行的程序；
* Ctrl+D：结束键盘输入（End Of File，EOF）。

### 1.6实用指令

#### 1.6.1帮助指令

| 指令      | 含义                        | 备注                                       |
| --------- | --------------------------- | ------------------------------------------ |
| man 指令  | 获取帮助信息                | man 是 manual 缩写，将指令具体信息显示出来 |
| help 命令 | 获取shell内置指令的帮助信息 |                                            |

#### 1.6.2文件目录类

##### pwd

功能：显示当前工作目录的绝对路径

##### ls

功能：显示指定工作目录下之内容。
语法：`ls [选项] 目录或文件`
常用选项：

- `-a`显示当前目录的所有文件和目录，包括隐藏的。
- `-l`以列表的方式显示详细信息。

##### cd

功能：切换当前目录。
常用参数

- `cd`返回家目录
- `cd ~`返回家目录
- `cd ..`回到当前目录的上一级目录

##### mkdir

功能：创建目录
语法：`mkdir [选项] 要创建的目录`
常用选项：

- `-p`创建多级目录

##### rmdir

功能：删除空目录
语法：`rmdir 目录`

##### rm

功能：删除文件或目录
语法：`rm [选项] 文件或目录`
常用选项：

* -r`递归删除整个文件夹
  `
* -f 强制删除，不提示

##### touch

功能：新建一到多个文件
语法：`mkdir 文件1 [文件2，文件3...]`

##### cp

功能：拷贝文件到指定目录
语法：`cp [选项] source dest`
常用选项：

- `-r`递归整个文件夹

注意：使用`\cp`，可以强制覆盖，不提示

##### mv

功能：移动文件与目录，或者重命名
语法1：`mv source dest`
语法2：`mv 旧名 新名`

##### cat

功能：查看文件内容，只读。
语法：`cat [选项] 文件`
常用选项：

- `-n`显示行号

技巧： 通常和管道命令`| more`一起使用，分页显示

##### more

功能：全屏、按页显示文本文件内容
语法：`more 文件`

##### less

功能：分屏查看文本文件内容。
说明：`less`的功能比`more`强大，它在显示文件内容时，不是全部加载后才显示，而是根据显示需要加载内容，对于显示大型文件具有较高效率。
语法：`less 文件`

##### >和>>

功能：`>`表示覆盖，`>>`表示追加。将前者覆盖或追加到后者，若后者不存在，则创建。
案例：

- `ls > 文件`将ls显示的内容覆盖写入到文件，若该文件不存在，则创建文件
- `cat 文件1 > 文件2`将文件1的内容覆盖文件2
- `echo "内容" >> 文件`将内容追加到文件

##### echo

功能：输出内容到控制台。
语法：`echo "内容"`

##### head

功能：显示文件前几行内容，默认10行。
语法：`head 文件`
常用选项：

- `head -n x 文件`显示前x行

##### tail

功能：显示文件后几行内容，默认10行。
语法：`tail 文件`
常用选项：

- `-n x`显示后x行
- `-f`实时监控文件变化

##### ln

功能：软链接也叫符号链接，类似windows快捷键
语法：`ln -s [原文件或目录] [软链接名]`
说明：

- 使用`pwd`查看目录时，看到的仍然是软链接所在的目录

##### history

功能：查看或执行历史命令
语法：`history`
案例：

- `history n`显示最近执行的n条命令
- `!n`执行第n条历史命令

#### 1.6.3时间日期类

##### date

功能：查看和设置时间日期
查看语法：

- `date` 查看当前时间
- `date "+%Y年%m月%d日 %H:%M:%S"`查看年月日时分秒*(其中的年月日以及冒号可以自由写，并且，也可以只显示一部分时间信息)*

设置语法：

- `date -s "年-月-日 时:分:秒"`设置时间

##### cal

功能：查看日历
语法：`cal [选项]`
案例：

- `cal 年份` 显示该年日历

#### 1.6.4搜索查找类

##### find

功能：从指定目录向下遍历其各个子目录，将满足条件的目录或文件显示在终端
语法：`find 搜索范围 选项`

| 选项            | 功能               | 备注               |
| --------------- | ------------------ | ------------------ |
| -name<文件名>   | 按文件名查找       | `<>`内为选项的参数 |
| -user<用户名>   | 按文件所属用户查找 |                    |
| -size<文件大小> | 按文件大小查找     | 单位为M、k         |

* 注：*（按ctrl+c可以退出查找）*

##### locate

功能：快速定位文件路径
语法：`locate 文件`
说明：

- 第一次运行前，必须使用`updatedb`指令创建locate数据库

##### grep

功能：过滤查找
语法：`grep [选项] 查找内容 源文件`
常用选项：

- `-i`忽略大小写
- `-n`显示匹配行和行号

##### which

语法：which [-a] command
-a ：将所有指令列出，而不是只列第一个

##### 管道符号|

功能：将`|`前的命令处理结果输出给后面的命令来处理
案例：

- `cat 文件 | grep -ni 内容`

#### 1.6.5压缩解压类

##### gzip/gunzip

功能：`gizp`压缩`(只能压缩为.gz格式)`，`gunzip`解压
语法：

- `gzip 文件`压缩
- `gunzip 文件`解压

注意：用`gzip`压缩不会保留源文件

##### zip/unzip

功能：zip压缩，unzip解压
语法：

* zip [选项] 压缩后的文件  压缩前的文件  （压缩文件或目录）
* unzip [选项]  要解压的文件  （解压）

zip选项：

* -r递归压缩，即压缩目录

unzip选项：

* -d指定解压后的存放目录

##### tar

功能：打包指令，打包后的文件为.tar.gz格式
语法：`tar [选项] 打包后的文件 打包前的文件`
说明：`-zcvf`压缩，`-zxvf`解压
选项：

- `c`产生.tar打包文件
- `v`显示详细信息
- `f`指定压缩后的文件名
- `z`打包同时压缩
- `x`解包.tar文件

### 1.7组管理



